<!-- FONDO OSCURO -->
<div class="modal-overlay" (click)="cerrarModal()"></div>

<!-- CONTENEDOR DEL MODAL -->
<div class="modal-wrapper" [class.show-recuperar]="mostrarRecuperar">
  <div class="modal-content">
    <!-- LOGIN NORMAL -->
    <div class="login-card">
      <h2>Bienvenido</h2>

      <p class="subtitle">Sistema de Reserva de Salas</p>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="email">Correo Institucional</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            placeholder="ejemplo@uta.cl"
            [class.input-error]="
              loginForm.get('email')?.invalid && loginForm.get('email')?.touched
            "
          />

          @if (loginForm.get('email')?.invalid &&
          loginForm.get('email')?.touched) {
          <span class="error-msg">Ingresa un correo válido</span>
          }
        </div>

        <div class="form-group">
          <label for="password">Contraseña</label>
          <input
            id="password"
            type="password"
            formControlName="password"
            [class.input-error]="
              loginForm.get('password')?.invalid &&
              loginForm.get('password')?.touched
            "
          />

          @if (loginForm.get('password')?.invalid &&
          loginForm.get('password')?.touched) {
          <span class="error-msg">La contraseña es requerida</span>
          }
        </div>

        @if (errorLogin) {
        <div class="alert-error">
          {{ mensajeError || "Usuario o contraseña incorrectos." }}
        </div>
        }

        <button type="submit" [disabled]="loginForm.invalid || loading">
          @if (loading) { Cargando... } @else { Iniciar Sesión }
        </button>
      </form>

      <div class="recuperar-container">
        <span class="recuperar-link" (click)="mostrarRecuperar = true">
          ¿Olvidaste tu contraseña?
        </span>
      </div>
    </div>

    <!-- PANEL RECUPERAR PASSWORD A LA DERECHA -->
    @if (mostrarRecuperar) {
    <div class="recuperar-card">
      <app-recuperar-password
        (close)="mostrarRecuperar = false"
      ></app-recuperar-password>
    </div>
    }
  </div>
  <button class="modal-close-btn" (click)="cerrarModal()">✕</button>
</div>
