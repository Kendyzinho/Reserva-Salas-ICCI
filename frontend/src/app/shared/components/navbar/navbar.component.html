<nav class="navbar-container">
  <!-- LOGO -->
  <div class="logo-container" routerLink="/">
    <img src="images/logoweb_UTA.png" alt="Logo UTA" class="logo-img" />
    <div class="brand-text">
      <h1>Reserva de Salas</h1>
      <span>Universidad de TarapacÃ¡</span>
    </div>
  </div>

  <!-- ZONA DE USUARIO -->
  <ng-container *ngIf="isLoggedIn && usuario">
    <div class="user-container">
      <!-- Trigger (Nombre) -->
      <div class="user-trigger" (click)="toggleMenu()">
        <span class="user-name">{{ usuario.nombre }}</span>
        <span class="user-role badge">{{ usuario.rol }}</span>
        <span class="arrow">â–¼</span>
      </div>

      <!-- MenÃº Desplegable -->
      <div class="dropdown-menu" *ngIf="menuAbierto">
        <!-- COMÃšN: Todos pueden ver su perfil -->
        <a (click)="abrirPerfil()" class="dropdown-item"> ğŸ‘¤ Mi Perfil </a>
        <a
          routerLink="/calendario"
          (click)="toggleMenu()"
          class="dropdown-item"
        >
          ğŸ“… Calendario
        </a>

        <!-- OPCIONES PARA ESTUDIANTE -->
        <ng-container *ngIf="!isAyudante">
          <a
            routerLink="/mis-reservas"
            (click)="toggleMenu()"
            class="dropdown-item"
          >
            ğŸ“… Mis Reservas
          </a>
          <ng-container *ngIf="!isAyudante">
            <a (click)="abrirNotificaciones()" class="dropdown-item">
              ğŸ”” Notificaciones
            </a>
          </ng-container>
        </ng-container>

        <!-- OPCIONES PARA AYUDANTE -->
        <ng-container *ngIf="isAyudante">
          <a routerLink="/admin" (click)="toggleMenu()" class="dropdown-item">
            ğŸ“‹ Gestionar Reserva
          </a>
          <a
            routerLink="/admin/salas"
            (click)="toggleMenu()"
            class="dropdown-item"
          >
            ğŸ¢ Gestionar Salas
          </a>
          <a
            routerLink="/admin/ayudante-password-panel"
            (click)="toggleMenu()"
            class="dropdown-item"
          >
            ğŸ“‹ Gestionar ContraseÃ±as
          </a>
        </ng-container>

        <hr class="divider" />

        <!-- COMÃšN: Cerrar SesiÃ³n -->
        <button (click)="onLogout()" class="dropdown-item logout-btn">
          ğŸšª Cerrar SesiÃ³n
        </button>
      </div>
    </div>
  </ng-container>

  <!-- MODAL PERFIL -->
  <app-perfil-modal
    *ngIf="mostrarModalPerfil"
    [usuario]="usuario"
    (cerrar)="cerrarPerfil()"
  >
  </app-perfil-modal>

  <!-- MODAL NOTIFICACIONES -->
  <!-- MODAL NOTIFICACIONES -->
  <app-notificaciones
    [usuarioId]="usuarioIdNumber"
    [mostrar]="mostrarModalNotificaciones"
    (cerrar)="cerrarNotificaciones()"
  ></app-notificaciones>
</nav>
