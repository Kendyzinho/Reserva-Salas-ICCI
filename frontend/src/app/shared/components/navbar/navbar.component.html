<nav class="navbar-container">
  <!-- LOGO -->
  <div class="logo-container" routerLink="/">
    <img src="images/logoweb_UTA.png" alt="Logo UTA" class="logo-img" />
    <div class="brand-text">
      <h1>Reserva de Salas</h1>
      <span>Universidad de TarapacÃ¡</span>
    </div>
  </div>

  <!-- ZONA DE USUARIO -->
  @if (isLoggedIn && usuario) {
  <div class="user-container">
    <!-- Trigger (Nombre) -->
    <div class="user-trigger" (click)="toggleMenu()">
      <span class="user-name">{{ usuario.nombre }}</span>
      <!-- Mostramos el rol con un color distinto si es Ayudante (opcional, por CSS) -->
      <span class="user-role badge">{{ usuario.rol }}</span>
      <span class="arrow">â–¼</span>
    </div>

    <!-- MenÃº Desplegable -->
    @if (menuAbierto) {
    <div class="dropdown-menu">
      <!-- COMÃšN: Todos pueden ver su perfil -->
      <a (click)="abrirPerfil()" class="dropdown-item"> ğŸ‘¤ Mi Perfil </a>

      <!-- OPCIONES PARA ESTUDIANTE -->
      @if (!isAyudante) {
      <a
        routerLink="/mis-reservas"
        (click)="toggleMenu()"
        class="dropdown-item"
      >
        ğŸ“… Mis Reservas
      </a>
      }

      <!-- OPCIONES PARA AYUDANTE -->
      @if (isAyudante) {
      <a routerLink="/admin" (click)="toggleMenu()" class="dropdown-item">
        ğŸ“‹ Gestionar Reserva
      </a>
      <!-- OpciÃ³n para HU-12: Gestionar Salas -->
      <a routerLink="/admin/salas" (click)="toggleMenu()" class="dropdown-item">
        ğŸ¢ Gestionar Salas
      </a>

      <a
        routerLink="/admin/ayudante-password-panel"
        (click)="toggleMenu()"
        class="dropdown-item"
      >
        ğŸ“‹ Gestionar ContraseÃ±as
      </a>
      }

      <hr class="divider" />

      <!-- COMÃšN: Cerrar SesiÃ³n -->
      <button (click)="onLogout()" class="dropdown-item logout-btn">
        ğŸšª Cerrar SesiÃ³n
      </button>
    </div>
    }
  </div>
  }

  <!-- MODAL PERFIL -->
  @if (mostrarModalPerfil) {
  <app-perfil-modal [usuario]="usuario" (cerrar)="cerrarPerfil()">
  </app-perfil-modal>
  }
</nav>
